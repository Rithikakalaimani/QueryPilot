# Railway config for QueryPilot backend.
# In Railway: Service → Settings → set Root Directory to "backend".
# Uses requirements-railway.txt (no torch/sentence-transformers/ragas) to avoid build timeout.
# Set EMBEDDING_PROVIDER=openai and OPENAI_API_KEY. RAGAS /evaluate returns 503 on Railway.

[build]
buildCommand = "pip install --no-cache-dir -r requirements-railway.txt"

[deploy]
# Must run in a shell so PORT is expanded (Railway may run in exec form otherwise)
startCommand = "sh -c \"uvicorn main:app --host 0.0.0.0 --port ${PORT:-8000}\""
